////////////////////////////////////////////////////////////////////////////////////////////////////
// file:	Support\UsableEntity.cs
//
// summary:	Implements the usable entity class
////////////////////////////////////////////////////////////////////////////////////////////////////

using System;

namespace LawsonOperationResult.DBSupport
{
	/// <summary>	An usable entity. </summary>
	public class UsableEntity
	{
		//public string PhoneNumber { get; set; }

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary>	Gets or sets the option in time. </summary>
		///
		/// <value>	The option in time. </value>
		////////////////////////////////////////////////////////////////////////////////////////////////////

		public DateTime? OptInTime { get; set; }

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary>	Gets or sets the identifier of the client. </summary>
		///
		/// <value>	The identifier of the client. </value>
		////////////////////////////////////////////////////////////////////////////////////////////////////

		public int ClientId { get; set; }

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary>	Gets the option in quarter. </summary>
		///
		/// <value>	The option in quarter. </value>
		////////////////////////////////////////////////////////////////////////////////////////////////////

		public int? OptInQuarter { get; }

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary>	Constructor. </summary>
		///
		/// <param name="clientId"> 	Identifier for the client. </param>
		/// <param name="optInTime">	The option in time. </param>
		/// <param name="today">		The today Date/Time. </param>
		////////////////////////////////////////////////////////////////////////////////////////////////////

		public UsableEntity(int clientId, DateTime? optInTime, DateTime today)
		{
			ClientId = clientId;
			OptInTime = optInTime;
			OptInQuarter = null;
			if (OptInTime.HasValue) OptInQuarter = (today - OptInTime.Value).Days / 90;
		}

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary>	Returns a string that represents the current object. </summary>
		///
		/// <returns>	A string that represents the current object. </returns>
		///
		/// <seealso cref="M:System.Object.ToString()"/>
		////////////////////////////////////////////////////////////////////////////////////////////////////

		public override string ToString()
		{
			return $"Client {ClientId} OptIn {OptInTime}";
		}
	}
}
